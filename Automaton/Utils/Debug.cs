using ECommons.DalamudServices;

namespace Automaton.Utils;
public unsafe class Debug
{
    private static readonly Structs.PlayerController* _playerController = (Structs.PlayerController*)Svc.SigScanner.GetStaticAddressFromSig("48 8D 0D ?? ?? ?? ?? E8 ?? ?? ?? ?? 3C 01 75 1E 48 8D 0D");

    public static void SetSpeed(float multiplier = 1) => _playerController->MoveControllerWalk.BaseMovementSpeed = 6 * multiplier;

    //public static void SetSpeed(float speedBase)
    //{
    //    Svc.SigScanner.TryScanText("f3 ?? ?? ?? ?? ?? ?? ?? e8 ?? ?? ?? ?? 48 ?? ?? ?? ?? ?? ?? 0f ?? ?? e8 ?? ?? ?? ?? f3 ?? ?? ?? ?? ?? ?? ?? f3 ?? ?? ?? ?? ?? ?? ?? f3 ?? ?? ?? f3", out var address);
    //    address = address + 4 + Marshal.ReadInt32(address + 4) + 4;
    //    Dalamud.SafeMemory.Write(address + 20, speedBase);
    //    SetMoveControlData(speedBase);
    //}

    //private static unsafe void SetMoveControlData(float speed)
    //    => Dalamud.SafeMemory.Write(((delegate* unmanaged[Stdcall]<byte, nint>)Svc.SigScanner.ScanText("E8 ?? ?? ?? ?? 48 ?? ?? 74 ?? 83 ?? ?? 75 ?? 0F ?? ?? ?? 66"))(1) + 8, speed);
}
